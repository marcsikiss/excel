<!DOCTYPE html>
<html lang="hu">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F√ºggv√©nygyakorl√≥</title>
    <style>

/* playful embedded CSS */
:root{
  --bg1:#fdfbfb;--bg2:#ebedee;--ink:#2e2e2e;--muted:#6b7280;--card:#ffffff;--border:rgba(0,0,0,.08);
  --shadow:0 10px 25px rgba(0,0,0,.08);--primary:#ff7f50;--primary-2:#ffb347;--secondary:#00bfa6;--success:#9be564;--error:#ff6f61;--info:#ffd166;--radius:20px;
}
html,body{height:100%;}
body{margin:0;padding:24px;max-width:1100px;margin-inline:auto;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);line-height:1.7;background:linear-gradient(135deg,var(--bg1),var(--bg2));background-attachment:fixed;}
h1{text-align:center;font-weight:800;letter-spacing:.4px;color:var(--primary);font-size:clamp(1.8rem,2.5vw,2.6rem);margin:10px 0 24px;position:relative;}
h1::after{content:"üßÆ‚ú®";display:inline-block;margin-left:.4rem;transform:translateY(2px);}h2,h3{color:var(--secondary);margin:0 0 12px;}
#app-wrapper{display:grid;grid-template-columns:1fr 1fr;gap:28px;}@media(max-width:900px){#app-wrapper{grid-template-columns:1fr;}}
#data-container,#quiz-container,#challenge-results-container{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);animation:cardEnter .35s ease;}
#quiz-container{position:relative;overflow:hidden;}
#quiz-container::before,#quiz-container::after{content:"";position:absolute;border-radius:50%;filter:blur(8px);opacity:.15;z-index:0;}
#quiz-container::before{width:160px;height:160px;background:var(--primary);right:-40px;top:-40px;animation:float 8s ease-in-out infinite;}
#quiz-container::after{width:120px;height:120px;background:var(--secondary);left:-30px;bottom:-30px;animation:float 7s ease-in-out infinite reverse;}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}
#data-table table{width:100%;border-collapse:separate;border-spacing:0;font-size:.95rem;border:1px solid var(--border);overflow:hidden;border-radius:14px;}
#data-table thead th{background:linear-gradient(180deg,#fafafa,#f1f5f9);color:#334155;border-bottom:1px solid var(--border);text-align:center;font-weight:700;}
#data-table th,#data-table td{border-right:1px solid var(--border);padding:10px 12px;}
#data-table tr:nth-child(even) td{background:#fafafa;}
#data-table th:first-child{background:#eef2ff;color:#4338ca;font-weight:700;text-align:center;}
#data-table td:last-child,#data-table th:last-child{border-right:none;}
.input-group{margin:14px 0 18px;position:relative;z-index:1;}
label{font-weight:700;color:#334155;margin-bottom:6px;display:block;}
select,input[type="text"],button{width:100%;padding:12px 14px;font-size:1rem;border-radius:30px;border:1px solid var(--border);box-sizing:border-box;outline:none;transition:box-shadow .2s,transform .08s ease;background:#fff;}
select:focus,input[type="text"]:focus{box-shadow:0 0 0 4px rgba(0,191,166,.15);}input::placeholder{color:#9aa3af;}
button{cursor:pointer;font-weight:800;letter-spacing:.3px;color:#fff;border:none;background:linear-gradient(45deg,var(--primary),var(--primary-2));box-shadow:0 6px 14px rgba(255,127,80,.35);}
button:hover{transform:translateY(-1px);}button:active{transform:translateY(0);filter:saturate(1.1);}
#check-formula-btn{background:linear-gradient(45deg,#6366f1,#22d3ee);box-shadow:0 6px 14px rgba(99,102,241,.28);}
#next-question-btn,#restart-btn{background:linear-gradient(45deg,#22c55e,#4ade80);box-shadow:0 6px 14px rgba(34,197,94,.28);}
.mode-btn-small,#start-challenge-btn{width:auto;display:inline-block;padding:10px 18px;background:linear-gradient(45deg,#ef4444,#f97316);box-shadow:0 6px 14px rgba(239,68,68,.28);}
#question-area{background:#fff8ea;border:1px dashed #ffd166;border-radius:16px;padding:14px 16px;margin:10px 0 18px;}
#question-text{color:#0f172a;font-size:1.1rem;}
#question-hint{margin-top:10px;font-style:normal;color:#7c5c00;background:#fff3c4;border:1px solid #ffe58f;padding:10px 12px;border-radius:12px;}
#feedback-area{margin-top:16px;padding:12px 14px;border-radius:14px;font-weight:800;letter-spacing:.2px;}
.feedback-success{background:#eaffea;border:2px solid var(--success);color:#14532d;animation:popIn .35s ease;}
.feedback-error{background:#ffecec;border:2px solid var(--error);color:#7f1d1d;animation:popIn .35s ease;}
@keyframes popIn{from{transform:scale(.94);opacity:0;}to{transform:scale(1);opacity:1;}}
#syntax-hint-area{display:none;background:#eef2ff;color:#1e293b;padding:12px 14px;border-radius:12px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;border:1px solid #c7d2fe;}
#data-container>h2::before{content:"üìä ";}#quiz-container>h2::before{content:"üéØ ";}#challenge-results-container h2::before{content:"üèÜ ";}
#challenge-results-container{display:none;}#challenge-score{text-align:center;font-size:1.6rem;color:#0ea5e9;}
.result-item{border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:14px;background:#fafafa;}
.result-item.correct{background:#effdf3;border-color:#bbf7d0;}.result-item.incorrect{background:#fff1f2;border-color:#fecdd3;}
.result-item h4{margin:0 0 6px;}.result-item p{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;background:#ffffff;padding:6px 8px;border-radius:10px;border:1px dashed #e2e8f0;}
#mode-switch-container{margin-bottom:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
@keyframes cardEnter{from{transform:translateY(8px);opacity:0;}to{transform:translateY(0);opacity:1;}}
small,.muted{color:var(--muted);}

</style>
</head>
<body>

    <h1>F√ºggv√©nygyakorl√≥</h1>

    <div id="app-wrapper">
        <div id="data-container">
            <h2 id="data-table-title"></h2>
            <p>A k√©pletek √≠r√°s√°n√°l vedd figyelembe, hogy a fejl√©c az 1. sorban van, az adatok pedig a 2. sort√≥l kezd≈ëdnek.</p>
            <div id="data-table"></div>
        </div>

        <div id="quiz-container">
            <h2 id="quiz-title">Gyakorl√≥ M√≥d</h2>
            
            <div id="mode-switch-container">
                <button id="start-challenge-btn" class="mode-btn-small">Kih√≠v√°s M√≥d Ind√≠t√°sa</button>
            </div>

            <div id="question-area">
                <h3 id="question-text"></h3>
                <p id="question-hint"></p>
            </div>

            <div id="step-1" class="input-group">
                <label for="function-dropdown">1. V√°lassz f√ºggv√©nyt:</label>
                <select id="function-dropdown">
                    </select>
                <button id="check-function-btn" style="margin-top: 10px;">F√ºggv√©ny ellen≈ërz√©se</button>
            </div>

            <div id="step-2" class="input-group">
                <label for="formula-input">2. √çrd be a teljes k√©pletet:</label>
                <input type="text" id="formula-input" placeholder="=SZUM(A1:A10)">
                <button id="check-formula-btn" style="margin-top: 10px;">Ellen≈ërz√©s</button>
            </div>

            <div id="feedback-area"></div>
            <div id="syntax-hint-area"></div>

            <button id="next-question-btn">K√∂vetkez≈ë feladat</button>
        </div>
    </div>

    <div id="challenge-results-container">
        <h2>Kih√≠v√°s √ârt√©kel√©se</h2>
        <div id="challenge-results-list">
            </div>
        <h3 id="challenge-score"></h3>
        <button id="restart-btn" style="margin-top: 20px;">Vissza a Gyakorl√°shoz</button>
    </div>


    <script>
        // --- ADATOK ---

        const allFunctions = [
            "V√°lassz...", "SZUM", "SZUMHA", "DARABTELI", "√ÅTLAG", "√ÅTLAGHA", "MIN", "MAX", "KICSI", "NAGY", "HA", "KEREK√çT√âS"
        ];

        // --- TELJES ADATB√ÅZIS (MIND A 10 T√ÅBLA) ---
        const allTables = [
            // 0. Aut√≥keresked√©s
            {
                sheetName: "1. Aut√≥keresked√©s",
                tableData: [
                    { T√≠pus: "Astra", M√°rka: "Opel", Extra: "Igen", √År: 560000, Eladott: 4, Bev√©tel: 2240000, √ârt√©kes√≠t≈ë: "Kiss Iza" },
                    { T√≠pus: "Splash", M√°rka: "Suzuki", Extra: "Igen", √År: 780000, Eladott: 1, Bev√©tel: 780000, √ârt√©kes√≠t≈ë: "S√°va Emil" },
                    { T√≠pus: "Insignia", M√°rka: "Opel", Extra: "Nem", √År: 1300000, Eladott: 7, Bev√©tel: 9100000, √ârt√©kes√≠t≈ë: "Kiss Iza" },
                    { T√≠pus: "Mondeo", M√°rka: "Ford", Extra: "Igen", √År: 1119000, Eladott: 4, Bev√©tel: 4476000, √ârt√©kes√≠t≈ë: "Nemes Tibor" },
                    { T√≠pus: "XJ", M√°rka: "Jaguar", Extra: "Nem", √År: 3560000, Eladott: 1, Bev√©tel: 3560000, √ârt√©kes√≠t≈ë: "Nemes Tibor" },
                    { T√≠pus: "Fiesta", M√°rka: "Ford", Extra: "Nem", √År: 1500000, Eladott: 7, Bev√©tel: 10500000, √ârt√©kes√≠t≈ë: "Nemes Tibor" },
                    { T√≠pus: "Vectra", M√°rka: "Opel", Extra: "Igen", √År: 1160000, Eladott: 10, Bev√©tel: 11600000, √ârt√©kes√≠t≈ë: "R√©z Andor" },
                    { T√≠pus: "6", M√°rka: "Mazda", Extra: "Nem", √År: 3600000, Eladott: 3, Bev√©tel: 10800000, √ârt√©kes√≠t≈ë: "Kiss Iza" },
                    { T√≠pus: "Passat", M√°rka: "Volkswagen", Extra: "Igen", √År: 1890000, Eladott: 6, Bev√©tel: 11340000, √ârt√©kes√≠t≈ë: "Kiss Iza" },
                    { T√≠pus: "Avensis", M√°rka: "Toyota", Extra: "Nem", √År: 1750000, Eladott: 1, Bev√©tel: 1750000, √ârt√©kes√≠t≈ë: "S√°va Emil" },
                    { T√≠pus: "Focus", M√°rka: "Ford", Extra: "Igen", √År: 2065000, Eladott: 6, Bev√©tel: 12390000, √ârt√©kes√≠t≈ë: "Nemes Tibor" },
                    { T√≠pus: "Fabia", M√°rka: "Skoda", Extra: "Igen", √År: 1250000, Eladott: 5, Bev√©tel: 6250000, √ârt√©kes√≠t≈ë: "S√°va Emil" }
                ]
            },
            // 1. Bolt Elad√°s
            {
                sheetName: "2. Bolt Elad√°s",
                tableData: [
                    { Term√©k: "Keny√©r", Kateg√≥ria: "P√©ks√©g", Egys√©g√°r: 450, "Eladott db": 120, Akci√≥s: "Nem", Elad√≥: "Anna", Bev√©tel: 54000 },
                    { Term√©k: "Tej", Kateg√≥ria: "Tejterm√©k", Egys√©g√°r: 350, "Eladott db": 180, Akci√≥s: "Igen", Elad√≥: "B√©la", Bev√©tel: 63000 },
                    { Term√©k: "Sajt", Kateg√≥ria: "Tejterm√©k", Egys√©g√°r: 2100, "Eladott db": 60, Akci√≥s: "Nem", Elad√≥: "Anna", Bev√©tel: 126000 },
                    { Term√©k: "Alma", Kateg√≥ria: "Z√∂lds√©g/gy√ºm√∂lcs", Egys√©g√°r: 520, "Eladott db": 150, Akci√≥s: "Igen", Elad√≥: "Csaba", Bev√©tel: 78000 },
                    { Term√©k: "Narancs", Kateg√≥ria: "Z√∂lds√©g/gy√ºm√∂lcs", Egys√©g√°r: 690, "Eladott db": 130, Akci√≥s: "Nem", Elad√≥: "B√©la", Bev√©tel: 89700 },
                    { Term√©k: "K√°v√©", Kateg√≥ria: "Ital", Egys√©g√°r: 2890, "Eladott db": 40, Akci√≥s: "Nem", Elad√≥: "Anna", Bev√©tel: 115600 },
                    { Term√©k: "Tea", Kateg√≥ria: "Ital", Egys√©g√°r: 1290, "Eladott db": 55, Akci√≥s: "Igen", Elad√≥: "Csaba", Bev√©tel: 70950 }
                ]
            },
            // 2. Jegyek
            {
                sheetName: "3. Jegyek",
                tableData: [
                    { Di√°k: "Dorka", Tant√°rgy: "Matek", Jegy: 5, Pontsz√°m: 92, "H√°zi feladat?": "Igen", Tan√°r: "Kov√°cs" },
                    { Di√°k: "G√°bor", Tant√°rgy: "Matek", Jegy: 3, Pontsz√°m: 68, "H√°zi feladat?": "Nem", Tan√°r: "Kov√°cs" },
                    { Di√°k: "Zita", Tant√°rgy: "T√∂ri", Jegy: 4, Pontsz√°m: 74, "H√°zi feladat?": "Igen", Tan√°r: "Nagy" },
                    { Di√°k: "Levi", Tant√°rgy: "T√∂ri", Jegy: 2, Pontsz√°m: 43, "H√°zi feladat?": "Nem", Tan√°r: "Nagy" },
                    { Di√°k: "No√©mi", Tant√°rgy: "Angol", Jegy: 5, Pontsz√°m: 98, "H√°zi feladat?": "Igen", Tan√°r: "Smith" },
                    { Di√°k: "Bence", Tant√°rgy: "Matek", Jegy: 4, Pontsz√°m: 85, "H√°zi feladat?": "Igen", Tan√°r: "Kov√°cs" },
                    { Di√°k: "R√©ka", Tant√°rgy: "Angol", Jegy: 5, Pontsz√°m: 91, "H√°zi feladat?": "Nem", Tan√°r: "Smith" },
                    { Di√°k: "√Åron", Tant√°rgy: "Fizika", Jegy: 3, Pontsz√°m: 66, "H√°zi feladat?": "Igen", Tan√°r: "T√≥th" },
                    { Di√°k: "Luca", Tant√°rgy: "Angol", Jegy: 4, Pontsz√°m: 78, "H√°zi feladat?": "Igen", Tan√°r: "Smith" },
                    { Di√°k: "M√°t√©", Tant√°rgy: "Fizika", Jegy: 2, Pontsz√°m: 52, "H√°zi feladat?": "Nem", Tan√°r: "T√≥th" }
                ]
            },
            // 3. Foci
            {
                sheetName: "4. Foci",
                tableData: [
                    { Meccs: 1, Csapat: "P√°rducok", G√≥l: 2, L√∂v√©s: 9, "Kapott g√≥l": 1, "Hazai?": "Igen" },
                    { Meccs: 2, Csapat: "P√°rducok", G√≥l: 1, L√∂v√©s: 7, "Kapott g√≥l": 2, "Hazai?": "Nem" },
                    { Meccs: 3, Csapat: "S√≥lymok", G√≥l: 3, L√∂v√©s: 12, "Kapott g√≥l": 1, "Hazai?": "Igen" },
                    { Meccs: 4, Csapat: "S√≥lymok", G√≥l: 0, L√∂v√©s: 5, "Kapott g√≥l": 1, "Hazai?": "Nem" },
                    { Meccs: 5, Csapat: "P√°rducok", G√≥l: 1, L√∂v√©s: 10, "Kapott g√≥l": 0, "Hazai?": "Igen" },
                    { Meccs: 6, Csapat: "S√≥lymok", G√≥l: 2, L√∂v√©s: 8, "Kapott g√≥l": 1, "Hazai?": "Nem" },
                    { Meccs: 7, Csapat: "P√°rducok", G√≥l: 4, L√∂v√©s: 14, "Kapott g√≥l": 2, "Hazai?": "Nem" },
                    { Meccs: 8, Csapat: "S√≥lymok", G√≥l: 1, L√∂v√©s: 6, "Kapott g√≥l": 0, "Hazai?": "Igen" }
                ]
            },
            // 4. Utaz√°s
            {
                sheetName: "5. Utaz√°s",
                tableData: [
                    { Utas: "Anna", "√ötic√©l": "R√≥ma", Napok: 4, "√År/√©j": 32000, "F√©lpanzi√≥?": "Igen", √ñsszeg: 128000 },
                    { Utas: "B√©la", "√ötic√©l": "P√°rizs", Napok: 5, "√År/√©j": 45000, "F√©lpanzi√≥?": "Nem", √ñsszeg: 225000 },
                    { Utas: "Csilla", "√ötic√©l": "London", Napok: 3, "√År/√©j": 52000, "F√©lpanzi√≥?": "Igen", √ñsszeg: 156000 },
                    { Utas: "Dani", "√ötic√©l": "Pr√°ga", Napok: 2, "√År/√©j": 28000, "F√©lpanzi√≥?": "Nem", √ñsszeg: 56000 },
                    { Utas: "Emese", "√ötic√©l": "Ath√©n", Napok: 7, "√År/√©j": 39000, "F√©lpanzi√≥?": "Igen", √ñsszeg: 273000 },
                    { Utas: "Ferenc", "√ötic√©l": "Barcelona", Napok: 6, "√År/√©j": 47000, "F√©lpanzi√≥?": "Nem", √ñsszeg: 282000 },
                    { Utas: "Gina", "√ötic√©l": "R√≥ma", Napok: 5, "√År/√©j": 33000, "F√©lpanzi√≥?": "Igen", √ñsszeg: 165000 },
                    { Utas: "Hanna", "√ötic√©l": "P√°rizs", Napok: 3, "√År/√©j": 41000, "F√©lpanzi√≥?": "Nem", √ñsszeg: 123000 }
                ]
            },
            // 5. K√∂nyvt√°r
            {
                sheetName: "6. K√∂nyvt√°r",
                tableData: [
                    { Olvas√≥: "√âva", M≈±faj: "Reg√©ny", Oldalsz√°m: 320, "K√©s√©s nap": 0, "K√∂lcs√∂nz√©s (nap)": 14, "K√©sedelmi d√≠j": 0 },
                    { Olvas√≥: "Tam√°s", M≈±faj: "Krimi", Oldalsz√°m: 280, "K√©s√©s nap": 2, "K√∂lcs√∂nz√©s (nap)": 14, "K√©sedelmi d√≠j": 300 },
                    { Olvas√≥: "Lilla", M≈±faj: "Ismeretterj.", Oldalsz√°m: 190, "K√©s√©s nap": 0, "K√∂lcs√∂nz√©s (nap)": 21, "K√©sedelmi d√≠j": 0 },
                    { Olvas√≥: "Misi", M≈±faj: "Reg√©ny", Oldalsz√°m: 410, "K√©s√©s nap": 5, "K√∂lcs√∂nz√©s (nap)": 14, "K√©sedelmi d√≠j": 750 },
                    { Olvas√≥: "Zs√≥fi", M≈±faj: "Krimi", Oldalsz√°m: 360, "K√©s√©s nap": 1, "K√∂lcs√∂nz√©s (nap)": 21, "K√©sedelmi d√≠j": 150 },
                    { Olvas√≥: "Andr√°s", M≈±faj: "Reg√©ny", Oldalsz√°m: 500, "K√©s√©s nap": 0, "K√∂lcs√∂nz√©s (nap)": 28, "K√©sedelmi d√≠j": 0 },
                    { Olvas√≥: "Kata", M≈±faj: "Ismeretterj.", Oldalsz√°m: 220, "K√©s√©s nap": 3, "K√∂lcs√∂nz√©s (nap)": 21, "K√©sedelmi d√≠j": 450 },
                    { Olvas√≥: "Bori", M≈±faj: "Reg√©ny", Oldalsz√°m: 150, "K√©s√©s nap": 0, "K√∂lcs√∂nz√©s (nap)": 14, "K√©sedelmi d√≠j": 0 }
                ]
            },
            // 6. Id≈ëj√°r√°s
            {
                sheetName: "7. Id≈ëj√°r√°s",
                tableData: [
                    { Nap: "H", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 18.6, "Csapad√©k (mm)": 0, "Sz√©l (km/h)": 12 },
                    { Nap: "K", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 19.1, "Csapad√©k (mm)": 1.2, "Sz√©l (km/h)": 15 },
                    { Nap: "Sze", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 21.3, "Csapad√©k (mm)": 0, "Sz√©l (km/h)": 10 },
                    { Nap: "Cs", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 23.0, "Csapad√©k (mm)": 5, "Sz√©l (km/h)": 18 },
                    { Nap: "P", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 22.4, "Csapad√©k (mm)": 0.8, "Sz√©l (km/h)": 14 },
                    { Nap: "Szo", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 20.2, "Csapad√©k (mm)": 2.5, "Sz√©l (km/h)": 16 },
                    { Nap: "V", V√°ros: "Budapest", "H≈ëm√©rs√©klet (¬∞C)": 18.9, "Csapad√©k (mm)": 0, "Sz√©l (km/h)": 11 }
                ]
            },
            // 7. Webshop
            {
                sheetName: "8. Webshop",
                tableData: [
                    { "Rendel√©s #": 101, Vev≈ë: "Kov√°cs", Orsz√°g: "HU", Nett√≥: 12490, "√ÅFA kulcs": 0.27, "Sz√°ll√≠t√°si d√≠j": 0, Brutt√≥: 15862.3 },
                    { "Rendel√©s #": 102, Vev≈ë: "Nagy", Orsz√°g: "DE", Nett√≥: 39900, "√ÅFA kulcs": 0.19, "Sz√°ll√≠t√°si d√≠j": 2500, Brutt√≥: 49981 },
                    { "Rendel√©s #": 103, Vev≈ë: "Szab√≥", Orsz√°g: "HU", Nett√≥: 8590, "√ÅFA kulcs": 0.27, "Sz√°ll√≠t√°si d√≠j": 1500, Brutt√≥: 12409.3 },
                    { "Rendel√©s #": 104, Vev≈ë: "T√≥th", Orsz√°g: "AT", Nett√≥: 25990, "√ÅFA kulcs": 0.2, "Sz√°ll√≠t√°si d√≠j": 0, Brutt√≥: 31188 },
                    { "Rendel√©s #": 105, Vev≈ë: "Kiss", Orsz√°g: "HU", Nett√≥: 149900, "√ÅFA kulcs": 0.27, "Sz√°ll√≠t√°si d√≠j": 0, Brutt√≥: 190373 },
                    { "Rendel√©s #": 106, Vev≈ë: "Farkas", Orsz√°g: "RO", Nett√≥: 27900, "√ÅFA kulcs": 0.19, "Sz√°ll√≠t√°si d√≠j": 2500, Brutt√≥: 35701 },
                    { "Rendel√©s #": 107, Vev≈ë: "Horv√°th", Orsz√°g: "HU", Nett√≥: 9900, "√ÅFA kulcs": 0.27, "Sz√°ll√≠t√°si d√≠j": 1500, Brutt√≥: 14073 }
                ]
            },
            // 8. Gy√°rt√°s
            {
                sheetName: "9. Gy√°rt√°s",
                tableData: [
                    { T√©tel: "A01", √územ: "Kelet", "√ñsszes db": 5000, "Hib√°s db": 35, M≈±szak: "D√©lel≈ëtt", "Selejt %": 0.007 },
                    { T√©tel: "A02", √územ: "Kelet", "√ñsszes db": 4200, "Hib√°s db": 44, M≈±szak: "D√©lut√°n", "Selejt %": 0.010476 },
                    { T√©tel: "A03", √územ: "Nyugat", "√ñsszes db": 3800, "Hib√°s db": 28, M≈±szak: "√âjjel", "Selejt %": 0.007368 },
                    { T√©tel: "B01", √územ: "Nyugat", "√ñsszes db": 6100, "Hib√°s db": 90, M≈±szak: "D√©lel≈ëtt", "Selejt %": 0.014754 },
                    { T√©tel: "B02", √územ: "D√©l", "√ñsszes db": 4500, "Hib√°s db": 30, M≈±szak: "D√©lut√°n", "Selejt %": 0.006667 },
                    { T√©tel: "C01", √územ: "√âszak", "√ñsszes db": 5200, "Hib√°s db": 39, M≈±szak: "√âjjel", "Selejt %": 0.0075 },
                    { T√©tel: "C02", √územ: "√âszak", "√ñsszes db": 5100, "Hib√°s db": 45, M≈±szak: "D√©lel≈ëtt", "Selejt %": 0.008824 }
                ]
            },
            // 9. Adom√°ny
            {
                sheetName: "10. Adom√°ny",
                tableData: [
                    { Adom√°nyoz√≥: "Alfa Kft.", Csatorna: "Online", √ñsszeg: 200000, "Ism√©tl≈ëdik?": "Nem", V√°ros: "Bp.", Koordin√°tor: "Iza" },
                    { Adom√°nyoz√≥: "B√©res Zrt.", Csatorna: "Szem√©lyes", √ñsszeg: 150000, "Ism√©tl≈ëdik?": "Igen", V√°ros: "Debrecen", Koordin√°tor: "Bence" },
                    { Adom√°nyoz√≥: "C√©drus Bt.", Csatorna: "Online", √ñsszeg: 50000, "Ism√©tl≈ëdik?": "Igen", V√°ros: "Bp.", Koordin√°tor: "Iza" },
                    { Adom√°nyoz√≥: "Duna Rt.", Csatorna: "Rendezv√©ny", √ñsszeg: 300000, "Ism√©tl≈ëdik?": "Nem", V√°ros: "Szeged", Koordin√°tor: "Csilla" },
                    { Adom√°nyoz√≥: "Eperfa Kft.", Csatorna: "Online", √ñsszeg: 120000, "Ism√©tl≈ëdik?": "Igen", V√°ros: "Bp.", Koordin√°tor: "Iza" },
                    { Adom√°nyoz√≥: "Fl√≥ra Bt.", Csatorna: "Szem√©lyes", √ñsszeg: 80000, "Ism√©tl≈ëdik?": "Nem", V√°ros: "P√©cs", Koordin√°tor: "Bence" },
                    { Adom√°nyoz√≥: "G√°bor", Csatorna: "Online", √ñsszeg: 10000, "Ism√©tl≈ëdik?": "Igen", V√°ros: "Bp.", Koordin√°tor: "Iza" },
                    { Adom√°nyoz√≥: "Hanna", Csatorna: "Rendezv√©ny", √ñsszeg: 60000, "Ism√©tl≈ëdik?": "Nem", V√°ros: "Gy≈ër", Koordin√°tor: "Csilla" }
                ]
            }
        ];

        // --- AZ √ñSSZES FELADAT EGYS√âGES√çTVE ---
        const allQuestions = [
            // --- 0. Aut√≥keresked√©s (sheetId: 0) ---
            {
                sheetId: 0,
                question: "Mennyi az √∂sszes bev√©tel?",
                hint: "√ñsszes√≠tsd a 'Bev√©tel' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(F2:F13)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)" 
            },
            {
                sheetId: 0,
                question: "H√°ny aut√≥t adott el √∂sszesen Nemes Tibor?",
                hint: "√ñsszegezd az 'Eladott' oszlopot, ahol az √©rt√©kes√≠t≈ë 'Nemes Tibor'!",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(G2:G13;\"Nemes Tibor\";E2:E13)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem; √∂sszeadand√≥ sz√°mok)" 
            },
            {
                sheetId: 0,
                question: "H√°ny aut√≥t adtak el extra garanci√°val?",
                hint: "√ñsszegezd az 'Eladott' oszlopot, ahol az extra 'Igen'!",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(C2:C13;\"Igen\";E2:E13)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem; √∂sszeadand√≥ sz√°mok)" 
            },
            {
                sheetId: 0,
                question: "Mennyi az Opel aut√≥k √°tlag√°ra?",
                hint: "Sz√°mold ki az '√År' √°tlag√°t, ahol a m√°rka 'Opel'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B13;\"Opel\";D2:D13)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)" 
            },
            {
                sheetId: 0,
                question: "Mennyi a legalacsonyabb √°r?",
                hint: "Keresd meg a minimum √©rt√©ket az '√År' oszlopban!",
                correctFunction: "MIN", correctFormula: "=MIN(D2:D13)", syntaxHint: "=MIN(honnan v√°lasztok)" 
            },
             {
                sheetId: 0,
                question: "Mennyi a legmagasabb √°r?",
                hint: "Keresd meg a maximum √©rt√©ket az '√År' oszlopban!",
                correctFunction: "MAX", correctFormula: "=MAX(D2:D13)", syntaxHint: "=MAX(honnan v√°lasztok)" 
            },
            {
                sheetId: 0,
                question: "Mi a 2. legolcs√≥bb √°r?",
                hint: "Keresd meg a 2. legkisebb √©rt√©ket az '√År' oszlopban!",
                correctFunction: "KICSI", correctFormula: "=KICSI(D2:D13;2)", syntaxHint: "=KICSI(honnan v√°lasztok;h√°nyadikat v√°lasztom)" 
            },
            {
                sheetId: 0,
                question: "Mi a 2. legdr√°g√°bb √°r?",
                hint: "Keresd meg a 2. legnagyobb √©rt√©ket az '√År' oszlopban!",
                correctFunction: "NAGY", correctFormula: "=NAGY(D2:D13;2)", syntaxHint: "=NAGY(honnan v√°lasztok;h√°nyadikat v√°lasztom)" 
            },
            {
                sheetId: 0,
                question: "A 2 milli√≥ Ft-n√°l dr√°g√°bb aut√≥k 'Pr√©mium' kateg√≥ri√°sak. √çrj k√©pletet, ami az els≈ë aut√≥ (Astra) √°ra alapj√°n megmondja, hogy 'Igen' (pr√©mium) vagy 'Nem' (nem pr√©mium)!",
                hint: "A logikai vizsg√°latot (2 milli√≥n√°l dr√°g√°bb) a D2 cell√°n kell elv√©gezned. Az eredm√©ny 'Igen' vagy 'Nem' legyen.",
                correctFunction: "HA", correctFormula: "=HA(D2>2000000;\"Igen\";\"Nem\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)" 
            },
            {
                sheetId: 0,
                question: "√çrj egy k√©pletet, ami kerek√≠ti az els≈ë aut√≥ (Astra) √°r√°t t√≠zezerre!",
                hint: "Haszn√°ld a KEREK√çT√âS f√ºggv√©nyt az els≈ë √°ron. A t√≠zezerre kerek√≠t√©shez -4-et haszn√°lj!",
                correctFunction: "KEREK√çT√âS", correctFormula: "=KEREK√çT√âS(D2;-4)", syntaxHint: "=KEREK√çT√âS(sz√°m;tizedesjegyek)" 
            },
	    {
                sheetId: 0,
                question: "H√°nyf√©le 'Opel'-t √°rulnak a keresked√©sben?",
                hint: "Sz√°mold meg, h√°ny darab Opel van a B oszlopban!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(B2:B13;\"Opel\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)" 
            },

            // --- 1. Bolt Elad√°s (sheetId: 1) ---
            {
                sheetId: 1,
                question: "Mennyi az √∂sszes bev√©tel?",
                hint: "√ñsszes√≠tsd a 'Bev√©tel' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(G2:G8)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 1,
                question: "Mennyi az √°tlagos egys√©g√°r?",
                hint: "Sz√°mold ki az 'Egys√©g√°r' oszlop √°tlag√°t!",
                correctFunction: "√ÅTLAG", correctFormula: "=√ÅTLAG(C2:C8)", syntaxHint: "=√ÅTLAG(√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 1,
                question: "Mennyi bev√©tel sz√°rmazott akci√≥s term√©kekb≈ël?",
                hint: "√ñsszegezd a 'Bev√©tel' √©rt√©k√©t, ahol az 'Akci√≥s?' 'Igen'!",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(E2:E8;\"Igen\";G2:G8)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem;√∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 1,
                question: "H√°ny t√©telt adott el Anna?",
                hint: "Sz√°mold meg, h√°nyszor szerepel 'Anna' az 'Elad√≥' oszlopban!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(F2:F8;\"Anna\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 1,
                question: "Mennyi a legolcs√≥bb term√©k egys√©g√°ra?",
                hint: "Keresd meg a minimum √©rt√©ket az 'Egys√©g√°r' oszlopban!",
                correctFunction: "MIN", correctFormula: "=MIN(C2:C8)", syntaxHint: "=MIN(honnan v√°lasztok)"
            },
            {
                sheetId: 1,
                question: "Mi a 3. legnagyobb bev√©tel?",
                hint: "Keresd meg a 3. legnagyobb √©rt√©ket a 'Bev√©tel' oszlopban!",
                correctFunction: "NAGY", correctFormula: "=NAGY(G2:G8;3)", syntaxHint: "=NAGY(honnan v√°lasztok;h√°nyadikat v√°lasztom)"
            },
            {
                sheetId: 1,
                question: "100000 Ft bev√©tel felett 5000 Ft b√≥nusz j√°r, egy√©bk√©nt nem j√°r b√≥nusz. √çrj k√©pletet, amely megadja, hogy j√°r-e a b√≥nusz vagy nem (ha igen, akkor 5000 Ft legyen az eredm√©ny, ha nem, akkor 0 Ft!",
                hint: "A vizsg√°latot (100000 Ft felett) az els≈ë term√©k (Keny√©r) bev√©tel√©n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(G2>100000;5000;0)", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },

            // --- 2. Jegyek (sheetId: 2) ---
            {
                sheetId: 2,
                question: "Mennyi az √°tlagos pontsz√°m?",
                hint: "Sz√°mold ki a 'Pontsz√°m' oszlop √°tlag√°t!",
                correctFunction: "√ÅTLAG", correctFormula: "=√ÅTLAG(D2:D11)", syntaxHint: "=√ÅTLAG(√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 2,
                question: "Mennyi az Angol t√°rgy √°tlaga?",
                hint: "Sz√°mold ki a jegyek √°tlag√°t, ahol a tant√°rgy 'Angol'.",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B11;\"Angol\";C2:C11)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 2,
                question: "H√°ny 5-√∂s jegy van?",
                hint: "Sz√°mold meg, h√°nyszor szerepel '5' a 'Jegy' oszlopban!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(C2:C11;5)", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 2,
                question: "Mennyi a minimum pontsz√°m?",
                hint: "Keresd meg a minimum √©rt√©ket a 'Pontsz√°m' oszlopban!",
                correctFunction: "MIN", correctFormula: "=MIN(D2:D11)", syntaxHint: "=MIN(honnan v√°lasztok)"
            },
            {
                sheetId: 2,
                question: "Mennyi a maximum pontsz√°m?",
                hint: "Keresd meg a maximum √©rt√©ket a 'Pontsz√°m' oszlopban!",
                correctFunction: "MAX", correctFormula: "=MAX(D2:D11)", syntaxHint: "=MAX(honnan v√°lasztok)"
            },
            {
                sheetId: 2,
                question: "Amennyiben valaki el√©rt legal√°bb 60 pontot, sikeres a vizsga. √çrj k√©pletet, amely meg√°llap√≠tja, hogy siker√ºlt-e a vizsga (ha igen, akkor az eredm√©ny 'Sikeres', k√ºl√∂nben 'Sikertelen')",
                hint: "A vizsg√°latot (el√©rt-e 60 pontot) az els≈ë di√°k (Dorka) pontsz√°m√°n v√©gezd el.",
                correctFunction: "HA", correctFormula: "=HA(D2>=60;\"Sikeres\";\"Sikertelen\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },

            // --- 3. Foci (sheetId: 3) ---
            {
                sheetId: 3,
                question: "H√°ny g√≥lt l≈ëtt √∂sszesen a P√°rducok csapat?",
                hint: "√ñsszegezd a 'G√≥l' √©rt√©k√©t, ahol a csapat 'P√°rducok'!",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(B2:B9;\"P√°rducok\";C2:C9)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem;√∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 3,
                question: "Mennyi az √°tlagos l√∂v√©s hazai meccseken?",
                hint: "Sz√°mold ki a 'L√∂v√©s' √°tlag√°t, ahol a hazai 'Igen'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(F2:F9;\"Igen\";D2:F9)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem;√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 3,
                question: "Mennyi volt a legt√∂bb g√≥l egy meccsen?",
                hint: "Keresd meg a maximum √©rt√©ket a 'G√≥l' oszlopban!",
                correctFunction: "MAX", correctFormula: "=MAX(C2:C9)", syntaxHint: "=MAX(honnan v√°lasztok)"
            },
            {
                sheetId: 3,
                question: "√çrj k√©pletet, amely meg√°llap√≠tja, hogy gy≈ëz√∂tt-e a csapat vagy nem, azaz t√∂bb g√≥lt r√∫gtak, mint kaptak! Ha gy≈ëztek, legyen az eredm√©ny 'Gy≈ëzelem', ha nem, akkor 'Vesztes√©g'.",
                hint: "A vizsg√°latot (t√∂bb g√≥lt r√∫gtak, mint kaptak) az els≈ë meccsen v√©gezd el.",
                correctFunction: "HA", correctFormula: "=HA(C2>E2;\"Gy≈ëzelem\";\"Vesztes√©g\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },
{
                sheetId: 3,
                question: "H√°ny meccsen nem sz√ºletett g√≥l?",
                hint: "Sz√°mold meg a 'G√≥l' oszlopban a null√°kat!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(C2:C9;0)", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 3,
                question: "Mi a 2. legnagyobb l√∂v√©ssz√°m?",
                hint: "Keresd meg a 2. legnagyobb √©rt√©ket a 'L√∂v√©s' oszlopban!",
                correctFunction: "NAGY", correctFormula: "=NAGY(D2:D9;2)", syntaxHint: "=NAGY(honnan v√°lasztok;h√°nyadikat v√°lasztom)"
            },

            // --- 4. Utaz√°s (sheetId: 4) ---
            {
                sheetId: 4,
                question: "Mennyi az √∂sszes foglal√°si √∂sszeg?",
                hint: "√ñsszes√≠tsd az '√ñsszeg' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(F2:F9)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 4,
                question: "Mennyi az √°tlagos √°r/√©j R√≥ma eset√©n?",
                hint: "Sz√°mold ki az '√År/√©j' √°tlag√°t, ahol az √∫tic√©l 'R√≥ma'.",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B9;\"R√≥ma\";D2:D9)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem;√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 4,
                question: "H√°ny √©jszak√°t foglaltak f√©lpanzi√≥val?",
                hint: "√ñsszegezd a 'Napok' sz√°m√°t, ahol a f√©lpanzi√≥ 'Igen'.",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(E2:E9;\"Igen\";C2:C9)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem;√∂sszeadand√≥ sz√°mok)"
            },
{
                sheetId: 4,
                question: "H√°nyan fizetnek legfeljebb 150 ezer forintot a nyaral√°s√©rt?",
                hint: "Sz√°mold meg az '√ñsszeg' oszlopban azokat a cell√°kat, amelyekben legfeljebb 150 ezer Ft az √©rt√©k!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(F2:F9;\"<=150000\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 4,
                question: "Legal√°bb 5 napos foglal√°sn√°l 10% kedvezm√©ny j√°r. √çrj k√©pletet, amely meg√°llap√≠tja, hogy j√°r-e a kedvezm√©ny! Ha igen, akkor az eredm√©ny '10%', k√ºl√∂nben '0%' legyen.",
                hint: "A vizsg√°latot (legal√°bb 5 napot foglalt) az els≈ë utas (Anna) 'Napok' sz√°m√°n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(C2>=5;\"10%\";\"0%\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },
            {
                sheetId: 4,
                question: "Kerek√≠tsd az els≈ë utas (Anna) √∂sszeg√©t ezresre!",
                hint: "Az ezresre kerek√≠t√©shez -3-at haszn√°lj!",
                correctFunction: "KEREK√çT√âS", correctFormula: "=KEREK√çT√âS(F2;-3)", syntaxHint: "=KEREK√çT√âS(sz√°m;tizedesjegyek)"
            },

            // --- 5. K√∂nyvt√°r (sheetId: 5) ---
            {
                sheetId: 5,
                question: "H√°ny k√∂lcs√∂nz√©s k√©sett?",
                hint: "Sz√°mold meg, h√°nyszor nagyobb a 'K√©s√©s nap' null√°n√°l!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(D2:D9;\">0\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 5,
                question: "Mennyi a teljes k√©sedelmi d√≠j?",
                hint: "√ñsszes√≠tsd a 'K√©sedelmi d√≠j' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(F2:F9)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 5,
                question: "Mennyi az √°tlagos oldalsz√°m a 'Reg√©ny' m≈±fajban?",
                hint: "Sz√°mold ki az 'Oldalsz√°m' √°tlag√°t, ahol a m≈±faj 'Reg√©ny'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B9;\"Reg√©ny\";C2:C9)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)"
            },
{
                sheetId: 5,
                question: "√ñsszesen h√°ny napra k√∂lcs√∂n√∂zt√©k ki a 'Krimi' m≈±faj√∫ k√∂nyveket?",
                hint: "√ñsszegezd a k√∂lcs√∂nz√©s napjait, ahol a m≈±faj 'Krimi'!",
                correctFunction: "SZUMHA", correctFormula: "=SZUMHA(B2:B9;\"Krimi\";E2:E9)", syntaxHint: "=SZUMHA(honnan van a felt√©telem; mi a felt√©telem; √∂sszeadand√≥ sz√°mok)"
            },
            {
                sheetId: 5,
                question: "√çrj k√©pletet, amely megadja az oldalsz√°m alapj√°n, hogy a k√∂nyv r√∂vid olvasm√°ny-e! Ha 200 oldaln√°l kevesebb, akkor az eredm√©ny 'R√∂vid', k√ºl√∂nben 'Hossz√∫' legyen.",
                hint: "A vizsg√°latot (200 oldaln√°l kevesebb) az els≈ë olvas√≥ (√âva) k√∂nyv√©n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(C2<200;\"R√∂vid\";\"Hossz√∫\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },

            // --- 6. Id≈ëj√°r√°s (sheetId: 6) ---
            {
                sheetId: 6,
                question: "Mennyi volt az √°tlagh≈ëm√©rs√©klet a h√©ten?",
                hint: "Sz√°mold ki a 'H≈ëm√©rs√©klet (¬∞C)' oszlop √°tlag√°t!",
                correctFunction: "√ÅTLAG", correctFormula: "=√ÅTLAG(C2:C8)", syntaxHint: "=√ÅTLAG(√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 6,
                question: "Mennyi csapad√©k esett √∂sszesen?",
                hint: "√ñsszes√≠tsd a 'Csapad√©k (mm)' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(D2:D8)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
{
                sheetId: 6,
                question: "H√°ny nap f√∫jt legal√°bb 15 km/h-s sz√©l?",
                hint: "Sz√°mold meg a 'Sz√©l (km/h)' oszlopban a legal√°bb 15 km/h-s √©rt√©keket!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(E2:E8;\">=15\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 6,
                question: "Melyik volt a legszelesebb nap (km/h)?",
                hint: "Keresd meg a maximum √©rt√©ket a 'Sz√©l (km/h)' oszlopban!",
                correctFunction: "MAX", correctFormula: "=MAX(E2:E8)", syntaxHint: "=MAX(honnan v√°lasztok)"
            },
            {
                sheetId: 6,
                question: "Kerek√≠tsd az els≈ë nap h≈ëm√©rs√©klet√©t eg√©sz sz√°mra!",
                hint: "Az eg√©sz sz√°mra kerek√≠t√©shez 0-t haszn√°lj!",
                correctFunction: "KEREK√çT√âS", correctFormula: "=KEREK√çT√âS(C2;0)", syntaxHint: "=KEREK√çT√âS(sz√°m;tizedesjegyek)"
            },

             // --- 7. Webshop (sheetId: 7) ---
            {
                sheetId: 7,
                question: "Mennyi az √∂sszes brutt√≥ bev√©tel?",
                hint: "√ñsszes√≠tsd a 'Brutt√≥' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(G2:G8)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
{
                sheetId: 7,
                question: "Mennyi a 2. legkisebb √ÅFA kulcs?",
                hint: "Keresd meg a 2. legkisebb √©rt√©ket az '√ÅFA kulcs' oszlopban!",
                correctFunction: "KICSI", correctFormula: "=KICSI(E2:E8;2)", syntaxHint: "=KICSI(honnan v√°lasztok;h√°nyadikat v√°lasztom)"
            },
            {
                sheetId: 7,
                question: "Mennyi az √°tlagos nett√≥ √∂sszeg magyar rendel√©sekre?",
                hint: "Sz√°mold ki a 'Nett√≥' √°tlag√°t, ahol az orsz√°g 'HU'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(C2:C8;\"HU\";D2:D8)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)"
            },
{
                sheetId: 7,
                question: "Kerek√≠tsd az els≈ë brutt√≥ √∂sszeget eg√©sz sz√°mra!",
                hint: "Az eg√©sz sz√°mra val√≥ kerek√≠t√©sn√©l haszn√°lj 0-t!",
                correctFunction: "KEREK√çT√âS", correctFormula: "=KEREK√çT√âS(G2;0)", syntaxHint: "=KEREK√çT√âS(sz√°m;tizedesjegyek)"
            },
            {
                sheetId: 7,
                question: "H√°ny rendel√©sben volt sz√°ll√≠t√°si d√≠j?",
                hint: "Sz√°mold meg, h√°nyszor nagyobb a 'Sz√°ll√≠t√°si d√≠j' null√°n√°l!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(F2:F8;\">0\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 7,
                question: "Legal√°bb 20 ezer forintos rendel√©sn√©l ingyenes a h√°zhozsz√°ll√≠t√°s. √çrj k√©pletet, amely meg√°llap√≠tja, hogy j√°r-e az ingyenes sz√°ll√≠t√°s. Ha igen, az eredm√©ny 'Ingyenes' legyen, k√ºl√∂nben 'Nem'. ",
                hint: "A vizsg√°latot (legal√°bb 20 ezer forint) az els≈ë rendel√©s (Kov√°cs) 'Nett√≥' √©rt√©k√©n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(D2>=20000;\"Ingyenes\";\"Nem\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },

            // --- 8. Gy√°rt√°s (sheetId: 8) ---
            {
                sheetId: 8,
                question: "Mennyi az √°tlagos selejt%?",
                hint: "Sz√°mold ki a 'Selejt %' oszlop √°tlag√°t!",
                correctFunction: "√ÅTLAG", correctFormula: "=√ÅTLAG(F2:F8)", syntaxHint: "=√ÅTLAG(√°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 8,
                question: "Mennyi a hib√°s darabok sz√°ma √∂sszesen?",
                hint: "√ñsszes√≠tsd a 'Hib√°s db' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(D2:D8)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
{
                sheetId: 8,
                question: "H√°ny √©jjeli m≈±szak van?",
                hint: "Sz√°mold meg a 'M≈±szak' oszlopban az √©jjeleket!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(E2:E8;\"√âjjel\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
{
                sheetId: 8,
                question: "Mennyi volt a legt√∂bb hib√°s darab?",
                hint: "Keresd meg a 'Hib√°s db' oszlopban a legnagyobb √©rt√©ket!",
                correctFunction: "MAX", correctFormula: "=MAX(D2:D8)", syntaxHint: "=MAX(honnan v√°lasztok)"
            },
            {
                sheetId: 8,
                question: "Mennyi az √°tlagos selejt% az '√âszak' √ºzemben?",
                hint: "Sz√°mold ki a 'Selejt %' √°tlag√°t, ahol az √ºzem '√âszak'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B8;\"√âszak\";F2:F8)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 8,
                question: "Ha a Selejt % 0.015 (azaz 1.5%) felett van, akkor eredm√©nyk√©nt √≠rasd ki, hogy 'Riaszt√°s', k√ºl√∂nben semmit!",
                hint: "A vizsg√°latot az els≈ë t√©tel (A01) 'Selejt %' √©rt√©k√©n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(F2>0,015;\"Riaszt√°s\";\"\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            },
            {
                sheetId: 8,
                question: "Kerek√≠tsd az els≈ë t√©tel (A01) selejt%-√°t k√©t tizedesre.",
                hint: "A k√©t tizedesjegyre kerek√≠t√©shez 2-t haszn√°lj! (Figyelem: a selejt% 0,007, nem 0.7!)",
                correctFunction: "KEREK√çT√âS", correctFormula: "=KEREK√çT√âS(F2;2)", syntaxHint: "=KEREK√çT√âS(sz√°m;tizedesjegyek)"
            },

            // --- 9. Adom√°ny (sheetId: 9) ---
            {
                sheetId: 9,
                question: "Mennyi a teljes adom√°ny√∂sszeg?",
                hint: "√ñsszes√≠tsd az '√ñsszeg' oszlopot!",
                correctFunction: "SZUM", correctFormula: "=SZUM(C2:C9)", syntaxHint: "=SZUM(√∂sszeadand√≥ sz√°mok)"
            },
{
                sheetId: 9,
                question: "Mekkora a 2. legnagyobb adom√°ny?",
                hint: "Keresd meg a 2. legnagyobb √©rt√©ket az '√ñsszeg' oszlopban!",
                correctFunction: "NAGY", correctFormula: "=NAGY(C2:C9;2)", syntaxHint: "=NAGY(honnan v√°lasztok;h√°nyadikat v√°lasztom)"
            },
            {
                sheetId: 9,
                question: "Mennyi az √°tlagos adom√°ny √∂sszege 'Online' csatorn√°n?",
                hint: "Sz√°mold ki az '√ñsszeg' √°tlag√°t, ahol a csatorna 'Online'!",
                correctFunction: "√ÅTLAGHA", correctFormula: "=√ÅTLAGHA(B2:B9;\"Online\";C2:C9)", syntaxHint: "=√ÅTLAGHA(honnan van a felt√©telem; mi a felt√©telem; √°tlagoland√≥ sz√°mok)"
            },
            {
                sheetId: 9,
                question: "H√°ny ism√©tl≈ëd≈ë adom√°ny van?",
                hint: "Sz√°mold meg, h√°nyszor szerepel 'Igen' az 'Ism√©tl≈ëdik?' oszlopban!",
                correctFunction: "DARABTELI", correctFormula: "=DARABTELI(D2:D9;\"Igen\")", syntaxHint: "=DARABTELI(honnan v√°lasztok;mi alapj√°n v√°lasztok)"
            },
            {
                sheetId: 9,
                question: "Mennyi a legnagyobb adom√°ny?",
                hint: "Keresd meg a maximum √©rt√©ket az '√ñsszeg' oszlopban!",
                correctFunction: "MAX", correctFormula: "=MAX(C2:C9)", syntaxHint: "=MAX(honnan v√°lasztok)"
            },
            {
                sheetId: 9,
                question: "A legal√°bb 150 ezer forintos adom√°ny kiemeltnek sz√°m√≠t. √çrj k√©pletet, amely megadja, hogy az adom√°ny kiemelt-e vagy nem! Ha igen, az eredm√©ny 'Kiemelt' legyen, ha nem, akkor semmi.",
                hint: "A vizsg√°latot az els≈ë adom√°nyoz√≥ (Alfa Kft.) '√ñsszeg' √©rt√©k√©n v√©gezd el!",
                correctFunction: "HA", correctFormula: "=HA(C2>=150000;\"Kiemelt\";\"\")", syntaxHint: "=HA(√°ll√≠t√°s;igaz_√©rt√©k;hamis_√©rt√©k)"
            }
        ];
        
        // --- ALKALMAZ√ÅS LOGIKA (M√ìDOS√çTVA) ---

        let currentMode = null; // 'practice' vagy 'challenge'
        let currentQuestionIndex = 0;
        let shuffledQuestions = []; // Az aktu√°lis m√≥dhoz kevert k√©rd√©sek
        let challengeAnswers = []; // A kih√≠v√°s m√≥d v√°laszai

        // DOM elemek
        const appWrapper = document.getElementById('app-wrapper');
        const challengeResultsContainer = document.getElementById('challenge-results-container');
        
        const startChallengeBtn = document.getElementById('start-challenge-btn');
        const restartBtn = document.getElementById('restart-btn');
        const modeSwitchContainer = document.getElementById('mode-switch-container');
        
        const dataTableEl = document.getElementById('data-table');
        const dataTableTitleEl = document.getElementById('data-table-title'); 
        const quizTitleEl = document.getElementById('quiz-title');
        const questionAreaEl = document.getElementById('question-area');
        const questionTextEl = document.getElementById('question-text');
        const questionHintEl = document.getElementById('question-hint');
        const feedbackAreaEl = document.getElementById('feedback-area');
        const syntaxHintAreaEl = document.getElementById('syntax-hint-area');
        
        const step1El = document.getElementById('step-1');
        const functionDropdownEl = document.getElementById('function-dropdown');
        const checkFunctionBtn = document.getElementById('check-function-btn');
        
        const step2El = document.getElementById('step-2');
        const formulaInputEl = document.getElementById('formula-input');
        const checkFormulaBtn = document.getElementById('check-formula-btn');
        
        const nextQuestionBtn = document.getElementById('next-question-btn');
        
        const challengeResultsList = document.getElementById('challenge-results-list');
        const challengeScore = document.getElementById('challenge-score');


        // Fisher-Yates kever≈ë f√ºggv√©ny
        function shuffleArray(array) {
            let currentIndex = array.length;
            let randomIndex;
            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // T√°bl√°zat kirajzol√°sa (Excel n√©zet)
        function renderTable(tableData) {
            let html = '<table>';
            const headers = Object.keys(tableData[0]);

            // 1. Fejl√©csor (Bet≈±k: A, B, C...)
            html += '<thead><tr>';
            html += '<th></th>'; // Bal fels≈ë sarok
            let colChar = 'A';
            headers.forEach(header => {
                html += `<th>${colChar}</th>`; 
                colChar = String.fromCharCode(colChar.charCodeAt(0) + 1);
            });
            html += '</tr></thead>';

            // 2. T√°blat√∂rzs (tbody)
            html += '<tbody>';
            
            // 3. Oszlopnevek sora (Sor 1)
            html += '<tr>';
            html += '<th>1</th>'; // Sor 1 azonos√≠t√≥
            headers.forEach(header => {
                html += `<td><b>${header}</b></td>`; // Oszlopnevek f√©lk√∂v√©ren
            });
            html += '</tr>';

            // 4. Adatsorok (Sor 2-t≈ël)
            tableData.forEach((row, index) => {
                html += '<tr>';
                html += `<th>${index + 2}</th>`; // Sor 2, 3, 4... azonos√≠t√≥
                headers.forEach(header => {
                    let value = row[header];
                    // Sz√°mform√°z√°s
                    if (typeof value === 'number') {
                        if (value > 1000) { 
                            value = value.toLocaleString('hu-HU');
                        } else if (value > 0 && value < 1) { 
                             value = value.toLocaleString('hu-HU', { minimumFractionDigits: 2, maximumFractionDigits: 4 });
                        }
                    }
                    html += `<td>${value}</td>`;
                });
                html += '</tr>';
            });

            html += '</tbody></table>';
            dataTableEl.innerHTML = html;
        }

        // F√ºggv√©nyv√°laszt√≥ felt√∂lt√©se
        function populateDropdown() {
            functionDropdownEl.innerHTML = '';
            allFunctions.forEach(funcName => {
                const option = document.createElement('option');
                option.value = funcName;
                option.textContent = funcName;
                functionDropdownEl.appendChild(option);
            });
        }

        // Gyakorl√≥ m√≥d ind√≠t√°sa (ez az alap√©rtelmezett)
        function startPracticeMode() {
            currentMode = 'practice';
            shuffledQuestions = shuffleArray([...allQuestions]);
            currentQuestionIndex = 0;
            
            // UI v√°lt√°s
            appWrapper.style.display = 'grid';
            challengeResultsContainer.style.display = 'none';
            modeSwitchContainer.style.display = 'block'; // Kih√≠v√°s gomb l√°tszik
            questionAreaEl.style.display = 'block';
            
            loadQuestion(currentQuestionIndex);
        }

        // Kih√≠v√°s m√≥d ind√≠t√°sa
        function startChallengeMode() {
            currentMode = 'challenge';
            // V√°lassz 5 v√©letlen k√©rd√©st
            shuffledQuestions = shuffleArray([...allQuestions]).slice(0, 5); 
            currentQuestionIndex = 0;
            challengeAnswers = []; // V√°laszok t√°rol√≥ja
            
            // UI v√°lt√°s
            appWrapper.style.display = 'grid';
            challengeResultsContainer.style.display = 'none';
            modeSwitchContainer.style.display = 'none'; // Kih√≠v√°s gomb elrejt√©se
            questionAreaEl.style.display = 'block';
            
            loadQuestion(currentQuestionIndex);
        }

        // Feladat bet√∂lt√©se (M√≥d-f√ºgg≈ë)
        function loadQuestion(index) {
            const q = shuffledQuestions[index];
            const table = allTables[q.sheetId];

            // T√°bl√°zat friss√≠t√©se
            dataTableTitleEl.textContent = `Adatt√°bla: ${table.sheetName}`;
            renderTable(table.tableData);

            // Alap UI vissza√°ll√≠t√°s
            formulaInputEl.value = '';
            feedbackAreaEl.innerHTML = '';
            feedbackAreaEl.className = '';
            syntaxHintAreaEl.style.display = 'none';
            checkFormulaBtn.style.display = 'block'; 

            if (currentMode === 'practice') {
                // --- GYAKORL√ì M√ìD ---
                quizTitleEl.textContent = 'Gyakorl√≥ M√≥d';
                questionTextEl.textContent = `${index + 1}. ${q.question}`;
                questionHintEl.textContent = '';
                questionHintEl.style.display = 'none';
                
                step1El.style.display = 'block'; // 1. l√©p√©s l√°tszik
                step2El.style.display = 'none';
                nextQuestionBtn.style.display = 'none';
                
                functionDropdownEl.value = 'V√°lassz...';
                checkFormulaBtn.textContent = 'K√©plet ellen≈ërz√©se';

            } else if (currentMode === 'challenge') {
                // --- KIH√çV√ÅS M√ìD (M√ìDOS√çTVA) ---
                quizTitleEl.textContent = `Kih√≠v√°s M√≥d (Feladat: ${index + 1}/${shuffledQuestions.length})`;
                questionTextEl.textContent = `${q.question}`; // Csak a k√©rd√©s
                
                // --- M√ìDOS√çT√ÅS (K√©r√©s alapj√°n) ---
                // Seg√≠ts√©g (hint) ELT√ÅVOL√çTVA
                questionHintEl.textContent = '';
                questionHintEl.style.display = 'none';
                // --- M√ìDOS√çT√ÅS V√âGE ---
                
                step1El.style.display = 'none'; // 1. l√©p√©s rejtve
                step2El.style.display = 'block'; // 2. l√©p√©s l√°tszik
                nextQuestionBtn.style.display = 'none';
                
                formulaInputEl.value = '=';
                checkFormulaBtn.textContent = 'V√°lasz r√∂gz√≠t√©se';
            }
        }

        // Visszajelz√©s megjelen√≠t√©se
        function showFeedback(message, type) {
            feedbackAreaEl.textContent = message;
            feedbackAreaEl.className = type === 'success' ? 'feedback-success' : 'feedback-error';
        }

        // 1. L√©p√©s: F√ºggv√©ny ellen≈ërz√©se (csak Gyakorl√≥ m√≥dban)
        function handleCheckFunction() {
            const selectedFunction = functionDropdownEl.value;
            const q = shuffledQuestions[currentQuestionIndex]; 

            if (selectedFunction === q.correctFunction) {
                showFeedback('Helyes! A f√ºggv√©ny megfelel≈ë. Most √≠rd be a teljes k√©pletet.', 'success');
                step1El.style.display = 'none';
                
                questionHintEl.textContent = `Seg√≠ts√©g: ${q.hint}`;
                questionHintEl.style.display = 'block';
                
                step2El.style.display = 'block';
                formulaInputEl.value = '=';
                formulaInputEl.focus();
                
                syntaxHintAreaEl.style.display = 'none'; 
            } else {
                showFeedback('Hib√°s f√ºggv√©ny. Gondold √°t √∫jra!', 'error');
                syntaxHintAreaEl.style.display = 'none'; 
            }
        }

        // 2. L√©p√©s: K√©plet ellen≈ërz√©se (M√≥d-f√ºgg≈ë)
        function handleCheckFormula() {
            const q = shuffledQuestions[currentQuestionIndex];
            
            // Tiszt√≠t√°s: sz√≥k√∂z√∂k, nagybet≈±, tizedesvessz≈ë cser√©je pontra
            const userFormula = formulaInputEl.value
                .replace(/\s+/g, '')
                .toUpperCase()
                .replace(/,/g, '.');

            const correctFormula = q.correctFormula
                .replace(/\s+/g, '')
                .toUpperCase()
                .replace(/,/g, '.');

            if (currentMode === 'practice') {
                // --- GYAKORL√ì M√ìD: Azonnali ellen≈ërz√©s ---
                if (userFormula === correctFormula) {
                    showFeedback('Kiv√°l√≥! A k√©plet t√∂k√©letes.', 'success');
                    step2El.style.display = 'none';
                    questionHintEl.style.display = 'none';
                    syntaxHintAreaEl.style.display = 'none'; 
                    checkFormulaBtn.style.display = 'none'; 
                    nextQuestionBtn.style.display = 'block'; 
                } else {
                    showFeedback('A k√©plet nem pontos. N√©zd meg a szintaxis s√∫g√≥t √©s pr√≥b√°ld √∫jra!', 'error');
                    syntaxHintAreaEl.textContent = q.syntaxHint;
                    syntaxHintAreaEl.style.display = 'block';
                    nextQuestionBtn.style.display = 'none'; 
                }
            } else if (currentMode === 'challenge') {
                // --- KIH√çV√ÅS M√ìD: Nincs ellen≈ërz√©s, csak r√∂gz√≠t√©s ---
                challengeAnswers.push(formulaInputEl.value); // V√°lasz elment√©se
                currentQuestionIndex++;

                if (currentQuestionIndex < shuffledQuestions.length) {
                    // Van m√©g k√©rd√©s
                    loadQuestion(currentQuestionIndex);
                } else {
                    // Kih√≠v√°s v√©ge
                    showChallengeResults();
                }
            }
        }

        // 3. L√©p√©s: Tov√°bb a k√∂vetkez≈ëre (csak Gyakorl√≥ m√≥dban)
        function handleNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion(currentQuestionIndex);
            } else {
                // Gyakorl√≥ m√≥d v√©ge
                quizTitleEl.textContent = 'A v√©g√©re √©rt√©l!';
                questionTextEl.textContent = '';
                questionHintEl.style.display = 'none';
                syntaxHintAreaEl.style.display = 'none';
                step1El.style.display = 'none';
                step2El.style.display = 'none';
                nextQuestionBtn.style.display = 'none';
                feedbackAreaEl.innerHTML = ''; // T√∂r√∂lj√ºk a kor√°bbi visszajelz√©st
                dataTableEl.innerHTML = ''; 
                dataTableTitleEl.textContent = 'Sz√©p munka!';

                showFeedback(`Gratul√°lok, sikeresen teljes√≠tetted mind a ${shuffledQuestions.length} feladatot!`, 'success');
                
                // Gomb az √∫jraind√≠t√°shoz
                const practiceRestartBtn = document.createElement('button');
                practiceRestartBtn.textContent = 'Gyakorl√°s √∫jraind√≠t√°sa';
                practiceRestartBtn.style.marginTop = '15px';
                practiceRestartBtn.addEventListener('click', startPracticeMode);
                feedbackAreaEl.appendChild(practiceRestartBtn);
            }
        }

        // Kih√≠v√°s eredm√©nyeinek megjelen√≠t√©se
        function showChallengeResults() {
            appWrapper.style.display = 'none';
            challengeResultsContainer.style.display = 'block';
            
            let score = 0;
            let resultsHTML = '';
            
            for (let i = 0; i < shuffledQuestions.length; i++) {
                const q = shuffledQuestions[i];
                const userAnswerRaw = challengeAnswers[i] || ""; 
                
                const userAnswerClean = userAnswerRaw.replace(/\s+/g, '').toUpperCase().replace(/,/g, '.');
                const correctFormulaClean = q.correctFormula.replace(/\s+/g, '').toUpperCase().replace(/,/g, '.');
                
                const isCorrect = (userAnswerClean === correctFormulaClean);
                if (isCorrect) score++;
                
                resultsHTML += `<div class="result-item ${isCorrect ? 'correct' : 'incorrect'}">`;
                resultsHTML += `<h4>${i + 1}. ${q.question}</h4>`;
                resultsHTML += `<p><b>A v√°laszod:</b> ${userAnswerRaw || '<i>(Nem v√°laszolt√°l)</i>'}</p>`;
                if (!isCorrect) {
                    resultsHTML += `<p><b>Helyes megold√°s:</b> ${q.correctFormula}</p>`;
                }
                resultsHTML += `</div>`;
            }
            
            challengeResultsList.innerHTML = resultsHTML;
            challengeScore.textContent = `Eredm√©nyed: ${shuffledQuestions.length}-b≈ël ${score} helyes!`;
            restartBtn.textContent = "Vissza a Gyakorl√°shoz";
        }


        // --- INICIALIZ√ÅL√ÅS (M√ìDOS√çTVA) ---
        function initializePage() {
            // Esem√©nykezel≈ëk a gombokhoz
            startChallengeBtn.addEventListener('click', startChallengeMode); 
            restartBtn.addEventListener('click', startPracticeMode); 
            
            checkFunctionBtn.addEventListener('click', handleCheckFunction);
            checkFormulaBtn.addEventListener('click', handleCheckFormula);
            nextQuestionBtn.addEventListener('click', handleNextQuestion);

            // Leg√∂rd√ºl≈ë men√º felt√∂lt√©se (el√©g egyszer)
            populateDropdown();
            
            // Alkalmaz√°s ind√≠t√°sa Gyakorl√≥ m√≥dban
            startPracticeMode();
        }

        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>